{"version":3,"file":"plugin.js","sources":["esm/web.js","esm/index.js"],"sourcesContent":["import { WebPlugin } from '@capacitor/core';\r\nexport class ClipboardWeb extends WebPlugin {\r\n    async write(options) {\r\n        var _a;\r\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\r\n            throw this.unavailable('Clipboard API not available in this browser');\r\n        }\r\n        if (options.html !== undefined) {\r\n            await this.writeHTML(options.html, (_a = options.text) !== null && _a !== void 0 ? _a : '');\r\n        }\r\n        else if (options.text !== undefined) {\r\n            await this.writeText(options.text);\r\n        }\r\n        else if (options.url !== undefined) {\r\n            await this.writeText(options.url);\r\n        }\r\n        else if (options.image !== undefined) {\r\n            await this.writeImage(options.image);\r\n        }\r\n        else {\r\n            throw new Error('Nothing to write');\r\n        }\r\n    }\r\n    async read() {\r\n        var _a, _b;\r\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\r\n            throw this.unavailable('Clipboard API not available in this browser');\r\n        }\r\n        if (typeof ClipboardItem !== 'undefined') {\r\n            try {\r\n                const clipboardItems = await navigator.clipboard.read();\r\n                const blobs = [];\r\n                for (const type of clipboardItems[0].types) {\r\n                    const clipboardBlob = await clipboardItems[0].getType(type);\r\n                    const blob = await this._getBlobData(clipboardBlob, type);\r\n                    blobs.push({ type, blob });\r\n                }\r\n                if (blobs.length === 0) {\r\n                    return this.readText();\r\n                }\r\n                const htmlBlob = (_a = blobs.find(({ type }) => type === 'text/html')) === null || _a === void 0 ? void 0 : _a.blob;\r\n                const textBlob = (_b = blobs.find(({ type }) => type === 'text/plain')) === null || _b === void 0 ? void 0 : _b.blob;\r\n                if (htmlBlob !== undefined) {\r\n                    return { type: 'text/html', value: htmlBlob, text: textBlob !== null && textBlob !== void 0 ? textBlob : '' };\r\n                }\r\n                else if (textBlob !== undefined) {\r\n                    return { type: 'text/plain', value: textBlob, text: textBlob };\r\n                }\r\n                else {\r\n                    return { type: blobs[0].type, value: blobs[0].blob, text: '' };\r\n                }\r\n            }\r\n            catch (err) {\r\n                return this.readText();\r\n            }\r\n        }\r\n        else {\r\n            return this.readText();\r\n        }\r\n    }\r\n    async readText() {\r\n        if (typeof navigator === 'undefined' ||\r\n            !navigator.clipboard ||\r\n            !navigator.clipboard.readText) {\r\n            throw this.unavailable('Reading from clipboard not supported in this browser');\r\n        }\r\n        const text = await navigator.clipboard.readText();\r\n        return { type: 'text/plain', value: text, text };\r\n    }\r\n    async writeHTML(html, text) {\r\n        if (typeof navigator === 'undefined' ||\r\n            !navigator.clipboard ||\r\n            !navigator.clipboard.write) {\r\n            throw this.unavailable('Writting to clipboard not supported in this browser');\r\n        }\r\n        else {\r\n            try {\r\n                const htmlType = 'text/html';\r\n                const textType = 'text/plain';\r\n                const clipboardItemInput = new ClipboardItem({\r\n                    [htmlType]: new Blob([html], { type: htmlType }),\r\n                    [textType]: new Blob([text], { type: textType }),\r\n                });\r\n                await navigator.clipboard.write([clipboardItemInput]);\r\n            }\r\n            catch (err) {\r\n                throw new Error('Failed to write html');\r\n            }\r\n        }\r\n    }\r\n    async writeImage(image) {\r\n        if (typeof navigator === 'undefined' ||\r\n            !navigator.clipboard ||\r\n            !navigator.clipboard.write) {\r\n            throw this.unavailable('Writting to clipboard not supported in this browser');\r\n        }\r\n        else {\r\n            try {\r\n                const blob = await (await fetch(image)).blob();\r\n                const clipboardItemInput = new ClipboardItem({ [blob.type]: blob });\r\n                await navigator.clipboard.write([clipboardItemInput]);\r\n            }\r\n            catch (err) {\r\n                throw new Error('Failed to write html');\r\n            }\r\n        }\r\n    }\r\n    async writeText(text) {\r\n        if (typeof navigator === 'undefined' ||\r\n            !navigator.clipboard ||\r\n            !navigator.clipboard.writeText) {\r\n            throw this.unavailable('Writting to clipboard not supported in this browser');\r\n        }\r\n        await navigator.clipboard.writeText(text);\r\n    }\r\n    _getBlobData(clipboardBlob, type) {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            if (type.includes('image')) {\r\n                reader.readAsDataURL(clipboardBlob);\r\n            }\r\n            else {\r\n                reader.readAsText(clipboardBlob);\r\n            }\r\n            reader.onloadend = () => {\r\n                const r = reader.result;\r\n                resolve(r);\r\n            };\r\n            reader.onerror = e => {\r\n                reject(e);\r\n            };\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\r\nimport { ClipboardWeb } from './web';\r\nconst Clipboard = registerPlugin('Clipboard', {\r\n    web: () => new ClipboardWeb(),\r\n});\r\nexport * from './definitions';\r\nexport { Clipboard };\r\n//# sourceMappingURL=index.js.map"],"names":["WebPlugin","registerPlugin"],"mappings":"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"}