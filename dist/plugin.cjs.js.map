{"version":3,"file":"plugin.cjs.js","sources":["esm/web.js","esm/index.js"],"sourcesContent":["import { WebPlugin } from '@capacitor/core';\r\nexport class ClipboardWeb extends WebPlugin {\r\n    async write(options) {\r\n        var _a;\r\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\r\n            throw this.unavailable('Clipboard API not available in this browser');\r\n        }\r\n        if (options.html !== undefined) {\r\n            await this.writeHTML(options.html, (_a = options.text) !== null && _a !== void 0 ? _a : '');\r\n        }\r\n        else if (options.text !== undefined) {\r\n            await this.writeText(options.text);\r\n        }\r\n        else if (options.url !== undefined) {\r\n            await this.writeText(options.url);\r\n        }\r\n        else if (options.image !== undefined) {\r\n            await this.writeImage(options.image);\r\n        }\r\n        else {\r\n            throw new Error('Nothing to write');\r\n        }\r\n    }\r\n    async read() {\r\n        var _a, _b;\r\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\r\n            throw this.unavailable('Clipboard API not available in this browser');\r\n        }\r\n        if (typeof ClipboardItem !== 'undefined') {\r\n            try {\r\n                const clipboardItems = await navigator.clipboard.read();\r\n                const blobs = [];\r\n                for (const type of clipboardItems[0].types) {\r\n                    const clipboardBlob = await clipboardItems[0].getType(type);\r\n                    const blob = await this._getBlobData(clipboardBlob, type);\r\n                    blobs.push({ type, blob });\r\n                }\r\n                if (blobs.length === 0) {\r\n                    return this.readText();\r\n                }\r\n                const htmlBlob = (_a = blobs.find(({ type }) => type === 'text/html')) === null || _a === void 0 ? void 0 : _a.blob;\r\n                const textBlob = (_b = blobs.find(({ type }) => type === 'text/plain')) === null || _b === void 0 ? void 0 : _b.blob;\r\n                if (htmlBlob !== undefined) {\r\n                    return { type: 'text/html', value: htmlBlob, text: textBlob !== null && textBlob !== void 0 ? textBlob : '' };\r\n                }\r\n                else if (textBlob !== undefined) {\r\n                    return { type: 'text/plain', value: textBlob, text: textBlob };\r\n                }\r\n                else {\r\n                    return { type: blobs[0].type, value: blobs[0].blob, text: '' };\r\n                }\r\n            }\r\n            catch (err) {\r\n                return this.readText();\r\n            }\r\n        }\r\n        else {\r\n            return this.readText();\r\n        }\r\n    }\r\n    async readText() {\r\n        if (typeof navigator === 'undefined' ||\r\n            !navigator.clipboard ||\r\n            !navigator.clipboard.readText) {\r\n            throw this.unavailable('Reading from clipboard not supported in this browser');\r\n        }\r\n        const text = await navigator.clipboard.readText();\r\n        return { type: 'text/plain', value: text, text };\r\n    }\r\n    async writeHTML(html, text) {\r\n        if (typeof navigator === 'undefined' ||\r\n            !navigator.clipboard ||\r\n            !navigator.clipboard.write) {\r\n            throw this.unavailable('Writting to clipboard not supported in this browser');\r\n        }\r\n        else {\r\n            try {\r\n                const htmlType = 'text/html';\r\n                const textType = 'text/plain';\r\n                const clipboardItemInput = new ClipboardItem({\r\n                    [htmlType]: new Blob([html], { type: htmlType }),\r\n                    [textType]: new Blob([text], { type: textType }),\r\n                });\r\n                await navigator.clipboard.write([clipboardItemInput]);\r\n            }\r\n            catch (err) {\r\n                throw new Error('Failed to write html');\r\n            }\r\n        }\r\n    }\r\n    async writeImage(image) {\r\n        if (typeof navigator === 'undefined' ||\r\n            !navigator.clipboard ||\r\n            !navigator.clipboard.write) {\r\n            throw this.unavailable('Writting to clipboard not supported in this browser');\r\n        }\r\n        else {\r\n            try {\r\n                const blob = await (await fetch(image)).blob();\r\n                const clipboardItemInput = new ClipboardItem({ [blob.type]: blob });\r\n                await navigator.clipboard.write([clipboardItemInput]);\r\n            }\r\n            catch (err) {\r\n                throw new Error('Failed to write html');\r\n            }\r\n        }\r\n    }\r\n    async writeText(text) {\r\n        if (typeof navigator === 'undefined' ||\r\n            !navigator.clipboard ||\r\n            !navigator.clipboard.writeText) {\r\n            throw this.unavailable('Writting to clipboard not supported in this browser');\r\n        }\r\n        await navigator.clipboard.writeText(text);\r\n    }\r\n    _getBlobData(clipboardBlob, type) {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            if (type.includes('image')) {\r\n                reader.readAsDataURL(clipboardBlob);\r\n            }\r\n            else {\r\n                reader.readAsText(clipboardBlob);\r\n            }\r\n            reader.onloadend = () => {\r\n                const r = reader.result;\r\n                resolve(r);\r\n            };\r\n            reader.onerror = e => {\r\n                reject(e);\r\n            };\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\r\nimport { ClipboardWeb } from './web';\r\nconst Clipboard = registerPlugin('Clipboard', {\r\n    web: () => new ClipboardWeb(),\r\n});\r\nexport * from './definitions';\r\nexport { Clipboard };\r\n//# sourceMappingURL=index.js.map"],"names":["WebPlugin","registerPlugin"],"mappings":"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"}